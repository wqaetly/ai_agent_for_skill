# skill_agent Configuration File
# æ”¯æŒç¯å¢ƒå˜é‡æ›¿æ¢ï¼?{ENV_VAR_NAME}

# ==================== æœåŠ¡å™¨é…ç½?====================
server:
  host: "127.0.0.1"

  # HTTPç«¯å£ï¼ˆå…¼å®¹æ—§ç‰ˆï¼Œé™çº§æ–¹æ¡ˆï¼?
  http_port: 8765

  # Unity RPCç«¯å£ï¼ˆæ–°æ¶æ„ä¸»è¦é€šä¿¡æ–¹å¼ï¼?
  unity_rpc_port: 8766

  # Web UIç«¯å£ï¼ˆGradioç•Œé¢ï¼?
  web_port: 7860

  reload: false  # ç”Ÿäº§ç¯å¢ƒè®¾ä¸ºfalse
  debug: false

# åµŒå…¥æ¨¡å‹é…ç½® - ä½¿ç”¨æœ¬åœ°æ¨¡å‹
embedding:
  # æœ¬åœ°æ¨¡å‹è·¯å¾„ï¼ˆç›¸å¯¹äºconfig.yamlçš„è·¯å¾„ï¼‰
  model_name: "../Data/models/Qwen3-Embedding-0.6B"  # æœ¬åœ°Qwen3æ¨¡å‹è·¯å¾„
  device: "cpu"  # æˆ?"cuda" å¦‚æœæœ‰GPU
  batch_size: 32
  max_length: 8192  # Qwen3æ”¯æŒ32Kï¼Œè®¾ä¸?192ä»¥æé«˜é•¿æ–‡æœ¬å¤„ç†èƒ½åŠ›
  cache_dir: null  # nullè¡¨ç¤ºä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¼“å­˜ä½ç½®ï¼Œé¿å…Windowsè·¯å¾„é—®é¢˜
  use_flash_attention: false  # ä»…åœ¨GPUä¸Šå¯ç”¨ï¼ŒCPUä¸æ”¯æŒ?

# å‘é‡æ•°æ®åº“é…ç½?
vector_store:
  type: "chroma"  # å¯é€? chroma, faiss
  persist_directory: "../Data/vector_db"  # ç›¸å¯¹äºconfig.yamlçš„è·¯å¾?
  collection_name: "skill_collection"
  distance_metric: "cosine"  # cosine, l2, ip

# æŠ€èƒ½ç´¢å¼•é…ç½?
skill_indexer:
  skills_directory: "../../ai_agent_for_skill/Assets/Skills"  # ç›¸å¯¹äºconfig.yamlçš„è·¯å¾?
  watch_enabled: true  # æ˜¯å¦å¯ç”¨æ–‡ä»¶ç›‘å¬
  index_cache: "../Data/skill_index.json"  # ç›¸å¯¹äºconfig.yamlçš„è·¯å¾?

  # ç´¢å¼•å†…å®¹é…ç½®
  index_fields:
    - "skillName"
    - "skillDescription"
    - "skillId"
    - "actions"  # Actionç±»å‹å’Œå‚æ•?

  # æ˜¯å¦ç´¢å¼•Actionè¯¦ç»†ä¿¡æ¯
  index_action_details: true

  # è‡ªåŠ¨é‡å»ºç´¢å¼•é—´éš”ï¼ˆç§’ï¼‰ï¼Œ0è¡¨ç¤ºä»…åœ¨å¯åŠ¨å’Œæ–‡ä»¶å˜åŒ–æ—¶
  auto_reindex_interval: 0

# Actionè„šæœ¬ç´¢å¼•é…ç½®
action_indexer:
  # Unityå¯¼å‡ºçš„Action JSONæ–‡ä»¶ç›®å½•ï¼ˆæ¯ä¸ªActionä¸€ä¸ªæ–‡ä»¶ï¼‰
  actions_directory: "../Data/Actions"  # ç›¸å¯¹äºconfig.yamlçš„è·¯å¾?

  # Actionç´¢å¼•ç¼“å­˜è·¯å¾„
  action_index_cache: "../Data/action_index.json"  # ç›¸å¯¹äºconfig.yamlçš„è·¯å¾?

  # Actionå‘é‡æ•°æ®åº“collectionåç§°ï¼ˆç‹¬ç«‹äºæŠ€èƒ½collectionï¼?
  collection_name: "action_collection"

# RAGé…ç½®
rag:
  # æ£€ç´¢å‚æ•?
  top_k: 5  # è¿”å›æœ€ç›¸ä¼¼çš„Kä¸ªç»“æ?
  similarity_threshold: 0.15  # ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0-1ï¼‰ï¼Œè¿‡æ»¤ä¸ç›¸å…³ç»“æ?

  # é‡æ’åº?
  rerank_enabled: false  # æš‚ä¸å¯ç”¨ï¼Œå¯æ‰©å±•

  # ç¼“å­˜é…ç½®
  cache_enabled: true
  cache_ttl: 3600  # ç¼“å­˜ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼?

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "../Data/rag_server.log"  # ç›¸å¯¹äºconfig.yamlçš„è·¯å¾?
  max_bytes: 10485760  # 10MB
  backup_count: 3

# ==================== LLMæä¾›å•†é…ç½®ï¼ˆæ–°æ¶æ„ï¼‰====================
llm_providers:
  # é»˜è®¤ä½¿ç”¨çš„LLM
  default: "deepseek"

  # DeepSeeké…ç½®ï¼ˆä¸»åŠ›ï¼‰
  deepseek:
    enabled: true
    api_key: "${DEEPSEEK_API_KEY}"
    base_url: "https://api.deepseek.com/v1"
    model: "deepseek-chat"
    temperature: 0.7
    max_tokens: 4096

  # OpenAIå…¼å®¹é…ç½®ï¼ˆé€šä¹‰åƒé—®ç­‰ï¼‰
  openai_compatible:
    enabled: false
    api_key: "${OPENAI_API_KEY}"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4"
    temperature: 0.7
    max_tokens: 4096

  # Claudeé…ç½®ï¼ˆå¯é€‰ï¼‰
  claude:
    enabled: false
    api_key: "${CLAUDE_API_KEY}"
    base_url: "https://api.anthropic.com/v1"
    model: "claude-3-5-sonnet-20241022"
    temperature: 0.7
    max_tokens: 4096

# ==================== Unityé›†æˆé…ç½® ====================
unity_integration:
  # RPCè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼?
  rpc_timeout: 30

  # æ˜¯å¦è®°å½•æ“ä½œæ—¥å¿—
  log_operations: true
  log_database: "../../ai_agent_for_skill/Assets/operation_logs.db"

  # Unity RPCæš´éœ²çš„å‡½æ•?
  exposed_functions:
    - "CreateSkill"
    - "UpdateSkill"
    - "DeleteSkill"
    - "GetSkillList"
    - "ValidateConfig"
    - "ApplyParameters"

# ==================== Web UIé…ç½® ====================
web_ui:
  # Gradioä¸»é¢˜
  theme: "soft"  # "soft", "default", "monochrome"

  # æ˜¯å¦å¯ç”¨å…¬å¼€åˆ†äº«
  share: false

  # æ˜¯å¦å¯ç”¨é˜Ÿåˆ—
  enable_queue: true

  # æœ€å¤§å¹¶å‘æ•°
  max_concurrent: 5

  # å¯¹è¯å†å²ä¿å­˜è·¯å¾„
  chat_history_dir: "../Data/chat_history"

  # æ¯ä¸ªå¯¹è¯æœ€å¤§è½®æ•?
  max_conversation_turns: 50
