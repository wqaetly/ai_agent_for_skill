# RAG ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£

## ç³»ç»Ÿæ¦‚è§ˆ

RAG (Retrieval-Augmented Generation) ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºUnityçš„AIè¾…åŠ©æŠ€èƒ½è®¾è®¡ç³»ç»Ÿï¼Œé€šè¿‡å‘é‡æ£€ç´¢å’Œè¯­ä¹‰åˆ†æä¸ºç­–åˆ’äººå‘˜æä¾›æ™ºèƒ½çš„Actionæ¨èå’Œçº¦æŸéªŒè¯ã€?
### æ ¸å¿ƒæŒ‡æ ‡

- **ä»£ç è§„æ¨¡**: ~8,318 è¡?- **æ ¸å¿ƒæ–‡ä»¶**: 16 ä¸?- **é€šä¿¡ç«¯å£**: 127.0.0.1:8765
- **ä¸»è¦è¯­è¨€**: C# (Unity)
- **AIæœåŠ¡**: Python RAG + DeepSeek LLM

---

## å››å±‚æ¶æ„è®¾è®¡

### 1. é€šä¿¡å±?(Transport Layer)

è´Ÿè´£ä¸Python RAGæœåŠ¡çš„é€šä¿¡ï¼Œæä¾›è¿è¡Œæ—¶å’Œç¼–è¾‘å™¨åŒæ¨¡å¼æ”¯æŒã€?
#### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | ç±»å‹ | ç‰¹æ€?| ä»£ç è¡Œæ•° |
|------|------|------|---------|
| `RAGClient` | Runtime | åç¨‹ + WWW | 353 |
| `EditorRAGClient` | Editor | UniTask + HttpClient | 382 |

#### APIç«¯ç‚¹

```
GET  /health          - å¥åº·æ£€æŸ?POST /search          - å‘é‡è¯­ä¹‰æ£€ç´?POST /recommend       - Actionæ¨è
POST /index           - æ–‡æ¡£ç´¢å¼•
GET  /stats           - ç»Ÿè®¡ä¿¡æ¯
POST /clear-cache     - æ¸…é™¤ç¼“å­˜
```

#### é€šä¿¡ç‰¹æ€?
- **å¼‚æ­¥å¤„ç†**: ä¸é˜»å¡Unityä¸»çº¿ç¨?- **è¿æ¥ç›‘æ§**: 1ç§’é—´éš”Pingæ£€æµ?- **é”™è¯¯å¤„ç†**: è¶…æ—¶å’Œå¼‚å¸¸æ•è?- **ç¼“å­˜ç­–ç•¥**: æœ¬åœ°ç¼“å­˜ä¼˜åŒ–æ€§èƒ½

---

### 2. ç¼–è¾‘å™¨é›†æˆå±‚ (Editor Integration Layer)

æä¾›ç­–åˆ’å‹å¥½çš„å¯è§†åŒ–ç•Œé¢å’Œå·¥ä½œæµç¨‹ã€?
#### ä¸»è¦çª—å£

##### **skill_agentWindow** (1,132è¡?
ä¸‰æ ‡ç­¾æŸ¥è¯¢ç•Œé¢ï¼š

- **Tab 0: æŠ€èƒ½æœç´?* - å‘é‡æ£€ç´¢æŸ¥è¯?- **Tab 1: Actionæ¨è** - è¯­ä¹‰ç›¸ä¼¼åº?+ å¢å¼ºå¤„ç†
- **Tab 2: ç´¢å¼•ç®¡ç†** - æ–‡æ¡£ç´¢å¼•æ§åˆ¶

##### **DescriptionManagerWindow** (1,476è¡?
å…­æ­¥å®Œæ•´å·¥ä½œæµï¼š

```
1. æ‰«æ    â†?è‡ªåŠ¨å‘ç°æ‰€æœ‰Actionç±»å‹
2. ç”Ÿæˆ    â†?DeepSeek AIè‡ªåŠ¨ç”Ÿæˆæè¿°
3. ç¼–è¾‘    â†?ç­–åˆ’æ‰‹åŠ¨ä¼˜åŒ–æè¿°
4. ä¿å­˜    â†?ScriptableObjectæŒä¹…åŒ?5. å¯¼å‡º    â†?JSONæ ¼å¼å¯¼å‡º
6. ç´¢å¼•    â†?æäº¤åˆ°RAGæœåŠ¡
```

##### **SmartActionInspector**
åœ¨Actionç¼–è¾‘å™¨ä¸­ç›´æ¥é›†æˆæ¨èå»ºè®®ï¼Œå®ç°ç¼–è¾‘æµç¨‹æ— ç¼è¡”æ¥ã€?
#### è‡ªåŠ¨åˆå§‹åŒ?
```csharp
[InitializeOnLoad]
public class RAGEditorIntegration
{
    static RAGEditorIntegration()
    {
        // ç¼–è¾‘å™¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ?        EditorApplication.delayCall += Initialize;
    }
}
```

---

### 3. è¯­ä¹‰å¤„ç†å±?(Semantic Processing Layer)

æ ¸å¿ƒçš„è¯­ä¹‰åˆ†æå’Œçº¦æŸéªŒè¯å¼•æ“ã€?
#### ä¸‰å±‚è¯­ä¹‰ç»“æ„ (PEDæ¨¡å‹)

```csharp
ActionSemanticInfo {
    // Purpose - ä½¿ç”¨æ„å›¾
    intents: string[]        // ä½¿ç”¨åœºæ™¯
    scenarios: string[]      // åº”ç”¨æƒ…å¢ƒ
    keywords: string[]       // å…³é”®è¯æ ‡ç­?
    // Effect - å®é™…æ•ˆæœ
    primaryEffect: string    // ä¸»è¦æ•ˆæœç±»å‹
    targetType: string       // ä½œç”¨ç›®æ ‡
    rangeType: string        // ä½œç”¨èŒƒå›´

    // Dependency - é€»è¾‘çº¦æŸ
    prerequisites: string[]   // å‰ç½®ä¾èµ–
    incompatibles: string[]   // äº’æ–¥å…³ç³»
    synergies: string[]       // ååŒå¢å¼º
    followUps: string[]       // åç»­æ¨è
}
```

#### æ ¸å¿ƒç»„ä»¶èŒè´£

##### **ActionSemanticRegistry** (417è¡?
- **æ¨¡å¼**: Singleton
- **èŒè´£**: å…¨å±€è¯­ä¹‰é…ç½®ç®¡ç†
- **ç‰¹æ€?*: æ”¯æŒJSONçƒ­åŠ è½?- **é»˜è®¤é…ç½®**:
  - 4ä¸ªå†…ç½®Action (Damage/Heal/Shield/Movement)
  - 5æ¡å†…ç½®è§„åˆ?(äº’æ–¥/å‰ç½®/ååŒ)

##### **ActionConstraintValidator** (å¤šç»´åº¦éªŒè¯?
```csharp
ValidateConstraints() {
    1. æ£€æŸ¥äº’æ–¥å…³ç³?(incompatibles)
    2. æ£€æŸ¥å‰ç½®ä¾èµ?(prerequisites)
    3. åŒ¹é…æ„å›¾å…³é”®è¯?(intents/keywords)
    â†?ValidationResult { is_valid, issues[] }
}
```

##### **ActionRecommendationScorer** (ç»¼åˆè¯„åˆ†)
```csharp
CalculateFinalScore() {
    similarity_score  // ä»RAGæœåŠ¡è·å–
    frequency_penalty // ä½¿ç”¨é¢‘ç‡æƒ©ç½š
    business_priority // ä¸šåŠ¡ä¼˜å…ˆçº?
    finalScore = similarity Ã— (1 - penalty) Ã— sWeight
                 + priority Ã— bWeight
}
```

##### **ActionRecommendationExplainer** (365è¡?
ç”Ÿæˆäººç±»å¯è¯»çš„æ¨èè§£é‡Šï¼š

- **ç†ç”±** (reasons): ä¸ºä»€ä¹ˆæ¨è?- **è­¦å‘Š** (warnings): æ½œåœ¨é—®é¢˜
- **å»ºè®®** (suggestions): ä½¿ç”¨å»ºè®®
- **å‚è€?* (references): ç›¸å…³æ¡ˆä¾‹

##### **ActionRecommendationEnhancer** (Facadeé—¨é¢)
æ•´åˆå®Œæ•´æ¨èæµç¨‹ï¼?
```
åŸå§‹æ¨è
  â†?è¯„åˆ† (Scorer)
  â†?éªŒè¯ (Validator)
  â†?è§£é‡Š (Explainer)
  â†?æ’åºå’Œè¿‡æ»?  â†?å¢å¼ºæ¨è
```

---

### 4. æ•°æ®ç®¡ç†å±?(Data Management Layer)

#### ScriptableObjectæŒä¹…åŒ?
```csharp
ActionDescriptionDatabase : ScriptableObject
  â”œâ”€ descriptions: List<ActionDescriptionData>
  â”œâ”€ version: string
  â””â”€ lastModified: DateTime
```

#### JSONå¯¼å‡ºæ ¼å¼

```json
{
  "actions": [
    {
      "action_name": "Damage",
      "category": "Combat",
      "description": "é€ æˆä¼¤å®³",
      "usage_scenarios": ["æˆ˜æ–—", "æŠ€èƒ?],
      "keywords": ["æ”»å‡»", "ä¼¤å®³"]
    }
  ]
}
```

---

## å…³é”®è®¾è®¡æ¨¡å¼

### æ¨¡å¼åº”ç”¨æ€»è§ˆ

| è®¾è®¡æ¨¡å¼ | åº”ç”¨ç»„ä»¶ | è§£å†³é—®é¢˜ |
|---------|---------|---------|
| **Singleton** | ActionSemanticRegistry<br>ActionRecommendationEnhancer | å…¨å±€é…ç½®ç®¡ç†<br>ç»Ÿä¸€æœåŠ¡å…¥å£ |
| **Facade** | ActionRecommendationEnhancer | ç®€åŒ–å¤æ‚æ¨èæµç¨?|
| **InitializeOnLoad** | RAGEditorIntegration | è‡ªåŠ¨åˆå§‹åŒ–æœåŠ?|
| **Chain of Responsibility** | çº¦æŸéªŒè¯æµç¨‹ | å¤šçº§éªŒè¯é“?|
| **Strategy** | è¯„åˆ†ç®—æ³• | å¯é…ç½®æƒé‡ç­–ç•?|
| **Repository** | ActionDescriptionDatabase | æ•°æ®æŒä¹…åŒ–æŠ½è±?|

### Singletonå®ç°ç»†èŠ‚

```csharp
public class ActionSemanticRegistry
{
    private static ActionSemanticRegistry _instance;
    public static ActionSemanticRegistry Instance
    {
        get
        {
            if (_instance == null)
                _instance = LoadOrCreateDefault();
            return _instance;
        }
    }

    // æ”¯æŒçƒ­åŠ è½?    public void ReloadFromFile() { ... }
}
```

---

## å®Œæ•´æ•°æ®æµ?
### Actionæ¨èæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?1. ç”¨æˆ·è¾“å…¥ä¸Šä¸‹æ–?(skill_agentWindow)                            â”?â”?   "éœ€è¦ä¸€ä¸ªç¾¤ä½“æ²»ç–—æŠ€èƒ?                                      â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?2. EditorRAGClient â†?Python RAGæœåŠ¡                          â”?â”?   POST /recommend { query, top_k, context }                 â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?3. å‘é‡æ£€ç´?+ è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®?                                 â”?â”?   è¿”å›åŸå§‹æ¨è: [                                            â”?â”?     { action_name, similarity: 0.85 },                       â”?â”?     { action_name, similarity: 0.72 },                       â”?â”?     ...                                                      â”?â”?   ]                                                          â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?4. ActionRecommendationEnhancer.Enhance()                    â”?â”?                                                              â”?â”?   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?   â”?4.1 Scorer: è®¡ç®—ç»¼åˆå¾—åˆ†            â”?                 â”?â”?   â”?  - è¯­ä¹‰ç›¸ä¼¼åº?Ã— æƒé‡               â”?                 â”?â”?   â”?  - ä¸šåŠ¡ä¼˜å…ˆçº?Ã— æƒé‡               â”?                 â”?â”?   â”?  â†?finalScore                      â”?                 â”?â”?   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?                â”?                                            â”?â”?   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?   â”?4.2 Validator: çº¦æŸéªŒè¯             â”?                 â”?â”?   â”?  - æ£€æŸ¥äº’æ–¥å…³ç³?                   â”?                 â”?â”?   â”?  - æ£€æŸ¥å‰ç½®ä¾èµ?                   â”?                 â”?â”?   â”?  - åŒ¹é…æ„å›¾å…³é”®è¯?                 â”?                 â”?â”?   â”?  â†?is_valid + validation_issues    â”?                 â”?â”?   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?                â”?                                            â”?â”?   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?   â”?4.3 Explainer: ç”Ÿæˆè§£é‡Š             â”?                 â”?â”?   â”?  - reasons: æ¨èç†ç”±               â”?                 â”?â”?   â”?  - warnings: æ½œåœ¨é—®é¢˜              â”?                 â”?â”?   â”?  - suggestions: ä½¿ç”¨å»ºè®®           â”?                 â”?â”?   â”?  - references: å‚è€ƒæ¡ˆä¾?           â”?                 â”?â”?   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?                â”?                                            â”?â”?   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?   â”?4.4 æ’åºå’Œè¿‡æ»?                     â”?                 â”?â”?   â”?  - æŒ‰finalScoreæ’åº                â”?                 â”?â”?   â”?  - è¿‡æ»¤æ— æ•ˆæ¨è                    â”?                 â”?â”?   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?â”?                                                              â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?5. å¢å¼ºæ¨èç»“æœ                                               â”?â”?   [                                                          â”?â”?     EnhancedActionRecommendation {                           â”?â”?       action_name: "GroupHeal",                              â”?â”?       original_similarity: 0.85,                             â”?â”?       final_score: 0.92,                                     â”?â”?       is_valid: true,                                        â”?â”?       reasons: ["åŒ¹é…ç¾¤ä½“æ²»ç–—åœºæ™¯", "é«˜ç›¸ä¼¼åº¦"],             â”?â”?       warnings: ["éœ€è¦æ¶ˆè€—å¤§é‡é­”æ³•å€?],                      â”?â”?       suggestions: ["æ­é…é­”æ³•å›å¤æŠ€èƒ½ä½¿ç”?],                 â”?â”?       validation_issues: []                                  â”?â”?     },                                                       â”?â”?     ...                                                      â”?â”?   ]                                                          â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                 â”?                 v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?6. UIå±•ç¤º (skill_agentWindow)                                   â”?â”?   - æ¨èå¡ç‰‡å±•ç¤º                                             â”?â”?   - å¾—åˆ†ã€ç†ç”±ã€è­¦å‘Šå¯è§†åŒ–                                   â”?â”?   - ä¸€é”®åº”ç”¨åˆ°æŠ€èƒ½é…ç½?                                      â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?```

### æè¿°ç®¡ç†å·¥ä½œæµ?
```
æ‰«æ â†?ç”Ÿæˆ â†?ç¼–è¾‘ â†?ä¿å­˜ â†?å¯¼å‡º â†?ç´¢å¼•
 â”?     â”?     â”?     â”?     â”?     â”? â”?     â”?     â”?     â”?     â”?     â””â”€â†?POST /index
 â”?     â”?     â”?     â”?     â””â”€â”€â”€â”€â”€â”€â”€â”€â†?JSONæ–‡ä»¶
 â”?     â”?     â”?     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†?ScriptableObject
 â”?     â”?     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†?ç­–åˆ’æ‰‹åŠ¨ä¼˜åŒ–
 â”?     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†?DeepSeek AIç”Ÿæˆ
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†?åå°„æ‰«æActionç±»å‹
```

---

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### æŸ¥è¯¢ä¼˜åŒ–
- **HashMapç´¢å¼•**: O(1) å¤æ‚åº¦æŸ¥æ‰¾è¯­ä¹‰ä¿¡æ?- **æœ¬åœ°ç¼“å­˜**: é¢‘ç¹è®¿é—®æ•°æ®ç¼“å­˜åœ¨å†…å­?- **å»¶è¿ŸåŠ è½½**: æŒ‰éœ€åŠ è½½å¤§å‹é…ç½®æ–‡ä»¶

### å¼‚æ­¥å¤„ç†
```csharp
// ç¼–è¾‘å™¨æ¨¡å¼ï¼šUniTaskä¸é˜»å¡?async UniTask<SearchResult> SearchAsync(string query)

// è¿è¡Œæ—¶æ¨¡å¼ï¼šåç¨‹æ”¯æŒ
IEnumerator SearchCoroutine(string query, Action<SearchResult> callback)
```

### è¿æ¥æ± ç®¡ç?- 1ç§’é—´éš”Pingæ£€æµ‹æœåŠ¡å¯ç”¨æ€?- è¿æ¥å¤±è´¥è‡ªåŠ¨é‡è¯•æœºåˆ¶
- è¶…æ—¶é™åˆ¶é˜²æ­¢é•¿æ—¶é—´é˜»å¡?
---

## æŠ€æœ¯æ ˆ

### Unityç«?- **C# è¯­è¨€**: .NET Framework
- **å¼‚æ­¥æ¡†æ¶**: UniTask (ç¼–è¾‘å™? + Coroutine (è¿è¡Œæ—?
- **HTTPå®¢æˆ·ç«?*: HttpClient + UnityWebRequest
- **æ•°æ®åºåˆ—åŒ?*: JsonUtility (è€ƒè™‘è¿ç§»Newtonsoft.Json)
- **æŒä¹…åŒ?*: ScriptableObject

### Pythonç«?(RAGæœåŠ¡)
- **å‘é‡æ•°æ®åº?*: (æœªæ˜ç¡®ï¼Œæ¨æµ‹Chroma/Pinecone)
- **LLMæœåŠ¡**: DeepSeek API
- **Webæ¡†æ¶**: (æ¨æµ‹Flask/FastAPI)
- **ç«¯å£**: 127.0.0.1:8765

---

## æ ¸å¿ƒä¼˜åŠ¿

### 1. æ¶æ„æ¸…æ™°
- **å››å±‚åˆ†ç¦»**: é€šä¿¡ã€é›†æˆã€è¯­ä¹‰ã€æ•°æ®å„å¸å…¶è?- **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶èŒè´£æ˜ç¡®
- **ä½è€¦åˆ**: é€šè¿‡æ¥å£å’Œé—¨é¢è§£è€?
### 2. è¯­ä¹‰å®Œæ•´
- **PEDä¸‰å±‚æ¨¡å‹**: Purpose-Effect-Dependencyè¦†ç›–å…¨æ–¹ä½?- **å¤šç»´çº¦æŸ**: äº’æ–¥ã€å‰ç½®ã€ååŒã€åç»­å…¨é¢éªŒè¯?- **å¯è§£é‡Šæ€?*: ä¸åªæ¨èç»“æœï¼Œè¿˜æœ‰æ¨èç†ç”?
### 3. ç”¨æˆ·å‹å¥½
- **å…­æ­¥å·¥ä½œæµ?*: ä»æ‰«æåˆ°ç´¢å¼•ä¸€ç«™å¼å®Œæˆ
- **å¯è§†åŒ–ç•Œé?*: ä¸‰æ ‡ç­¾çª—å£ç›´è§‚æ“ä½?- **Inspectoré›†æˆ**: ç¼–è¾‘æµç¨‹æ— ç¼è¡”æ¥

### 4. æ‰©å±•æ€§å¼º
- **JSONé…ç½®**: çƒ­åŠ è½½æ”¯æŒåŠ¨æ€è°ƒæ•?- **Strategyæ¨¡å¼**: è¯„åˆ†ç®—æ³•å¯æ’æ‹?- **APIæ ‡å‡†åŒ?*: RESTfulæ¥å£æ˜“äºæ‰©å±•

---

## æŠ€æœ¯å€ºåŠ¡ä¸æ”¹è¿›å»ºè®?
### å½“å‰æŠ€æœ¯å€ºåŠ¡

#### 1. ä»£ç é‡å¤ (Critical)
```csharp
// RAGClient.cs å’?EditorRAGClient.cs é‡å¤å®šä¹‰
[Serializable]
public class SearchResult { ... }

// å»ºè®®ï¼šæå–åˆ°å…±äº«çš?RAGDataModels.cs
```

#### 2. JSONåºåˆ—åŒ–é™åˆ?(High)
```csharp
// Unity JsonUtility ä¸æ”¯æŒå¤šæ€å’Œå¤æ‚ç±»å‹
// å»ºè®®ï¼šè¿ç§»åˆ° Newtonsoft.Json
using Newtonsoft.Json;
```

#### 3. æœåŠ¡å‘ç°ç¡¬ç¼–ç ?(Medium)
```csharp
// å½“å‰ç¡¬ç¼–ç ?private const string serverUrl = "http://127.0.0.1:8765";

// å»ºè®®ï¼šé…ç½®åŒ–æˆ–æœåŠ¡å‘ç?public class RAGServerConfig : ScriptableObject
{
    public string serverUrl;
    public int timeout;
}
```

#### 4. æµ‹è¯•è¦†ç›–ä¸è¶³ (High)
- ç¼ºå°‘å•å…ƒæµ‹è¯•
- ç¼ºå°‘é›†æˆæµ‹è¯•
- ç¼ºå°‘è¯­ä¹‰çº¦æŸéªŒè¯çš„æµ‹è¯•ç”¨ä¾?
#### 5. æ—¥å¿—ç³»ç»Ÿä¸å®Œå–?(Low)
```csharp
// å»ºè®®ï¼šç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ
public static class RAGLogger
{
    public static void LogQuery(string query, float latency);
    public static void LogError(string operation, Exception ex);
}
```

### æ”¹è¿›ä¼˜å…ˆçº?
| ä¼˜å…ˆçº?| æ”¹è¿›é¡?| é¢„æœŸæ”¶ç›Š |
|--------|--------|----------|
| P0 | æå–å…±äº«æ•°æ®æ¨¡å‹åŸºç±» | å‡å°‘50%ä»£ç é‡å¤ |
| P0 | å®Œæ•´å•å…ƒæµ‹è¯•è¦†ç›– | æå‡ç¨³å®šæ€?|
| P1 | è¿ç§»Newtonsoft.Json | æ”¯æŒå¤æ‚ç±»å‹ |
| P1 | æœåŠ¡å‘ç°æœºåˆ¶ | æå‡éƒ¨ç½²çµæ´»æ€?|
| P2 | ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ | æ”¹å–„å¯ç»´æŠ¤æ€?|
| P2 | æ€§èƒ½ç›‘æ§åŸ‹ç‚¹ | è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ |

---

## æ ¸å¿ƒæ–‡ä»¶æ¸…å•

```
æ€»è®¡ï¼?6ä¸ªæ–‡ä»¶ï¼Œ~8,318è¡Œä»£ç ?ç»å¯¹è·¯å¾„ï¼šE:\Study\wqaetly\ai_agent_for_skill\ai_agent_for_skill\Assets\Scripts\RAGSystem\

æŒ‰é‡è¦æ€§æ’åºï¼š

ã€ç¼–è¾‘å™¨çª—å£ã€?1. DescriptionManagerWindow.cs               (1,476è¡? - å…­æ­¥å·¥ä½œæµä¸»çª—å£
2. skill_agentWindow.cs                          (1,132è¡? - ä¸‰æ ‡ç­¾æŸ¥è¯¢UI
3. SmartActionInspector.cs                    (è¡Œæ•°æœªæ˜) - Inspectoré›†æˆ

ã€è¯­ä¹‰å¤„ç†ã€?4. ActionRecommendationExplainer.cs           (365è¡?   - è§£é‡Šç”Ÿæˆ
5. ActionSemanticRegistry.cs                  (417è¡?   - é…ç½®ç®¡ç†Singleton
6. ActionConstraintValidator.cs               (æ–°æ–‡ä»?  - çº¦æŸéªŒè¯
7. ActionSemanticModels.cs                    (æ–°æ–‡ä»?  - è¯­ä¹‰æ•°æ®æ¨¡å‹
8. ActionRecommendationEnhancer.cs            (è¡Œæ•°æœªæ˜) - Facadeé—¨é¢

ã€é€šä¿¡å®¢æˆ·ç«¯ã€?9. RAGClient.cs                               (353è¡?   - è¿è¡Œæ—¶HTTPå®¢æˆ·ç«?10. EditorRAGClient.cs                        (382è¡?   - ç¼–è¾‘å™¨å¼‚æ­¥å®¢æˆ·ç«¯

ã€æ•°æ®ç®¡ç†ã€?11. ActionDescriptionDatabase.cs              (è¡Œæ•°æœªæ˜) - ScriptableObjectæŒä¹…åŒ?12. ActionDescriptionData.cs                  (è¡Œæ•°æœªæ˜) - å•ä¸ªæè¿°æ•°æ®é¡?13. ActionExportModels.cs                     (è¡Œæ•°æœªæ˜) - JSONå¯¼å‡ºæ ¼å¼

ã€ç¼–è¾‘å™¨é›†æˆã€?14. RAGEditorIntegration.cs                   (è¡Œæ•°æœªæ˜) - InitializeOnLoadå…¥å£

ã€å·¥å…·ç±»ã€?15. DescriptionManagerWindowç›¸å…³æ”¯æŒæ–‡ä»¶      (å¤šä¸ª)    - UIè¾…åŠ©å’Œæ•°æ®å¤„ç?```

---

## æ€»ç»“

RAGç³»ç»Ÿæ˜¯ä¸€ä¸?*æ¶æ„æ¸…æ™°ã€è®¾è®¡å®Œå–?*çš„AIè¾…åŠ©æŠ€èƒ½è®¾è®¡ç³»ç»Ÿã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

1. **ä¸‰å±‚è¯­ä¹‰ç»“æ„ (PEDæ¨¡å‹)** - å…¨é¢è¦†ç›–ä½¿ç”¨æ„å›¾ã€å®é™…æ•ˆæœå’Œé€»è¾‘çº¦æŸ
2. **å¤šç»´åº¦çº¦æŸéªŒè¯?* - äº’æ–¥ã€å‰ç½®ã€ååŒã€åç»­å…³ç³»å®Œæ•´éªŒè¯?3. **å¯è§£é‡Šæ¨è?* - ä¸ä»…æ¨èç»“æœï¼Œæ›´æœ‰ç†ç”±ã€è­¦å‘Šå’Œå»ºè®®
4. **å®Œæ•´å·¥ä½œæµ?* - ä»æ‰«æåˆ°ç´¢å¼•ä¸€ç«™å¼å®Œæˆ

å½“å‰ä¸»è¦æ”¹è¿›ç©ºé—´åœ¨äº**ä»£ç å¤ç”¨**ï¼ˆæå–å…±äº«åŸºç±»ï¼‰å’?*æµ‹è¯•è¦†ç›–**ï¼ˆè¡¥å……å•å…ƒæµ‹è¯•ï¼‰ã€‚æ•´ä½“è®¾è®¡å…·å¤‡è‰¯å¥½çš„**æ‰©å±•æ€?*å’?*å¯ç»´æŠ¤æ€?*ï¼Œæ¶æ„å†³ç­–åˆç†ï¼Œå€¼å¾—åœ¨æ­¤åŸºç¡€ä¸ŠæŒç»­è¿­ä»£ä¼˜åŒ–ã€?
---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–?*: 2025-11-10
**ç»´æŠ¤è€?*: RAG System Team
