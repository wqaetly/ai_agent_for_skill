# REQ-04 Unity编辑器一体化体验

## 背景
- 当前需要在独立RAG窗口复制参数，再回到Inspector手工粘贴，效率低且易错。

## 目标
- 让AI推荐结果在Inspector旁实时呈现，并支持一键写回。
- 为后续工具链（推荐/推理/验证）提供统一的MCP-Unity桥接层。

## 范围
- ✅ 设计MCP命令协议、Unity Editor插件、结果应用/回滚逻辑。
- ❌ 不实现完整UI美术，仅提供功能性面板。

## 实现步骤
1. 定义Editor与MCP Server的IPC（命令、超时、错误码），封装在插件SDK内。
2. 开发Inspector扩展面板，展示推荐列表、参数差异和警告提示。
3. 提供“应用/撤销”按钮：写回前调用Tool6验证，通过后更新SerializedObject。
4. 记录操作日志，便于审计与回滚。

## 数据与集成
- Unity插件通过MCP调用Tool3/4/5/6，需处理会话ID与技能上下文同步。

## 验收标准
- 常见技能编辑无需离开Inspector即可完成推荐→验证→写回全流程。
- 写回操作支持撤销，失败时保留原始配置。

## 风险与缓解
- Unity版本差异 → 选择LTS版本验证并隔离Editor API。
- 网络/进程中断 → 插件内置重试与超时提示。

## 指标
- 写回成功率、平均交互时间、用户手动改动次数。

## 交付产出
- Unity扩展原型、IPC协议文档、操作手册与示例录屏脚本。
