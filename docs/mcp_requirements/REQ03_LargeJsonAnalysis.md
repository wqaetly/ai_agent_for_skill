# REQ-03 超大JSON细粒度分析能?

**状?*: [已实?归档] | **优先?*: 已完?| **复用**: MCP Server 核心依赖

## 背景
- 现有RAG仅存技能摘要，无法定位具体Action片段或跨技能对比?
- 无法回答“哪些技能在DamageAction中baseDamage>200”一类结构化查询?

## 目标
- 引入行级/路径级索引，支持按轨道、Action类型、参数条件检索?
- 允许按需加载大文件片段并生成摘要，保?0K行技能的可操作性?

## 范围
- ?扩展索引器、构建查询API、缓存热数据、生成可读摘要?
- ?不重写现有RAG向量存储，仅新增结构化通道?

## 实现步骤
1. 在skill_indexer中记录轨?Action/参数路径、行号和摘要片段?
2. 实现ChunkedJsonStore，可按路径流式返回指定片段并限制内存占用?
3. 构建条件查询语法（Action+参数谓词），供Tool2/Tool5/Tool8复用?
4. 为常见查询缓存结果，并输出统?预览摘要以支持LLM推理?

## 数据与集?
- 依赖现有技能JSON仓库与Chroma向量检索结果?
- 输出的片段挂接到MCP资源URI，供客户端按需拉取?

## 验收标准
- 10K行技能查询耗时 < 500ms（缓存命中场景除外）?
- 支持至少5种参数比较运算（>, <, between, =, contains）?
- 能返回触发条件的行号、轨道与Action上下文?

## 风险与缓?
- JSON格式不统一 ?增加模式探测与回退解析?
- 查询表达式过于复??支持限制条件并给出错误提示?

## 指标
- 查询延迟、索引构建耗时、缓存命中率、LLM使用率?

## 交付产出
- 扩展版索引器、查询API、中英文示例、性能基准与监控告警方案?
