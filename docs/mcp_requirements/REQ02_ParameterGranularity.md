# REQ-02 参数填充粒度增强

## 背景
- 目前仅返回完整示例JSON，缺乏上下文学到的参数合理区间与依赖提示。
- Unity专有类型（Vector3/Color等）用户需手写，极易出错。

## 目标
- 按技能上下文推断每个参数的合理值、区间与置信度。
- 显示参数间依赖关系与必填提示，避免不一致配置。
- 提供Unity序列化友好的输出格式，支持直接写回Inspector。

## 范围
- ✅ 构建上下文特征、统计推理、依赖图与类型序列化。
- ❌ 不负责最终JSON拼装（交由OdinJsonGenerator）。

## 实现步骤
1. 设计SkillContextAssembler，提取描述、标签、帧位、已有Action等特征。
2. 构建参数依赖图（条件必填、互斥、默认补齐）并附规则解释。
3. 结合RAG统计与规则推理得出推荐值，输出多备选与引用技能。
4. 为Vector3/Color等类型提供Odin结构化结果，并在低置信度时标注需人工确认。

## 数据与集成
- 读取skill_indexer/action_indexer输出、统计缓存和业务规则库。
- 结果供Tool4主流程与Tool5/Tool6复用。

## 验收标准
- 置信度≥0.7的参数在真实技能中落入P25-P75区间的比例≥90%。
- 依赖关系提示覆盖计划内Action 100%，并在冲突时阻止写回。

## 风险与缓解
- 样本不足 → 引入同标签聚合 + 手工规则覆盖冷门场景。
- 复杂类型序列化错误 → 编写快照测试并与Unity示例对比。

## 指标
- 参数推荐命中率、依赖告警触发次数、手动回退比例。

## 交付产出
- ParameterInferencer设计文档、依赖规则表、单元/回归测试、示例提示语。
