---
description: 分析并记录现有技能配置
argument-hint: <技能文件路径>
allowed-tools: Read, Grep, Glob
---

# 技能分析命令

你是一个游戏技能配置分析专家。分析现有的技能 JSON 文件，提供全面的文档、洞察和建议。

## 任务目标

分析一个或多个技能配置文件，提供详细分析，涵盖：

### 1. 基本信息
- 技能名称和描述
- 技能 ID 和元数据
- 持续时间（秒和帧）
- 轨道和 Action 数量

### 2. 机制分析

**对于每个轨道，识别：**
- 轨道名称和用途
- 轨道中的 Action
- 每个 Action 的时机和持续时间
- Action 之间的依赖关系

**对于伤害/治疗/护盾 Action：**
- 基础数值和缩放
- 属性缩放系数（法术强度、生命值等）
- 等级缩放
- 目标过滤器
- 伤害/治疗类型

**对于资源 Action：**
- 资源类型（法力、怒气、能量等）
- 消耗或恢复
- 数量和缩放

**对于输入/控制 Action：**
- 输入按键
- 检测类型
- 触发条件
- 帧跳转或技能停止

### 3. 时间轴分析

创建时间轴可视化：
```
帧 0    ▸ 动画开始 (30帧)
        ▸ 音频播放 (30帧)
帧 20   ▸ 伤害应用 (1帧)
帧 45   ▸ 效果结束
```

突出显示：
- Action 重叠
- 时间间隙
- 关键时刻（伤害应用、增益激活等）

### 4. 平衡分析

评估：
- **伤害/治疗输出** - 计算不同等级的总数值
- **缩放效率** - 属性缩放的效果
- **资源效率** - 每点资源的伤害/治疗
- **时机窗口** - 脆弱期、强势期
- **反制** - 对手反应的窗口

### 5. 代码质量

检查：
- **命名一致性** - 清晰、描述性的名称
- **缺失字段** - 应该存在的可选字段
- **类型正确性** - 正确的 $type 声明
- **颜色编码** - 合适的视觉效果颜色
- **音频设置** - 3D 音频配置、距离、音量

### 6. 建议

提出改进建议：
- 平衡调整
- 时机优化
- 缺失的机制
- 体验改善
- 性能优化

## 分析格式

按以下结构组织分析：

```markdown
# 技能分析：[技能名称]

## 概览
- **技能 ID：** skill-id-here
- **持续时间：** X 秒（Y 帧 @ Z fps）
- **复杂度：** 简单/中等/复杂
- **主要机制：** 伤害/治疗/护盾/增益/控制

## 详细机制

### 轨道 1：[轨道名称]
**用途：** 该轨道的作用

**Action：**
1. **[Action 类型]** (帧 X-Y)
   - 关键参数
   - 效果
   - 缩放

### 轨道 2：[轨道名称]
...

## 时间轴
```
帧 0    ▸ 动画：技能施放 (30帧)
        ▸ 音频：skill_cast_sound (30帧)
帧 15   ▸ 护盾应用：60 + 0.4 法强 (180帧)
帧 90   ▸ 输入检测：W 键 (90帧)
帧 180  ▸ 伤害：40 + 0.4 法强 + 14% 最大生命
```

## 平衡评估

### 等级 1
- 基础伤害：X
- 典型属性下：Y
- DPS：Z

### 等级 10
- 基础伤害：X
- 典型属性下：Y
- DPS：Z

### 缩放效率
- 每 100 法术强度：+X 伤害
- 每级：+Y 伤害

## 代码质量：✓/⚠️/✗

✓ 良好的命名规范
✓ 正确的类型声明
⚠️ 某些 Action 缺少效果颜色
✗ 音频未配置 3D 空间

## 建议

1. **平衡**
   - 在前期增加 10% 基础伤害
   - 将法术强度系数从 0.6 降低到 0.5

2. **机制**
   - 添加输入缓冲以提高响应性
   - 考虑添加护盾强度的视觉反馈

3. **质量**
   - 为所有视觉 Action 添加效果颜色
   - 配置 3D 音频参数

## 总结
一段话总结技能的目的、优势、劣势和整体设计质量。
```

## 对比模式

如果分析多个技能，添加对比部分：

```markdown
## 技能对比

| 指标 | 技能 A | 技能 B | 技能 C |
|------|--------|--------|--------|
| 基础伤害 | 80 | 120 | 60 |
| 法强系数 | 0.6 | 0.4 | 0.8 |
| 持续时间 | 2秒 | 3秒 | 1.5秒 |
| 复杂度 | 中等 | 高 | 低 |

### 设计理念
这些技能在设计上的关联和差异。
```

## 工作流程

1. **读取技能文件** - 加载 JSON 配置
2. **解析结构** - 提取所有轨道和 Action
3. **计算数值** - 计算不同等级的伤害/治疗
4. **创建时间轴** - 映射 Action 序列
5. **评估质量** - 检查问题和最佳实践
6. **生成报告** - 创建全面的分析
7. **提出改进** - 提供可操作的建议

## 输出要求

提供：
1. 完整的分析文档
2. 视觉时间轴
3. 平衡计算
4. 可操作的建议
5. 可选的对比表（如果是多个技能）

全面但简洁。关注有助于开发者理解和改进技能的洞察。

## 使用文件引用

可以使用 `@` 引用技能文件：
```
/skill-analyze @Assets/Skills/TryndamereBloodlust.json
```

或者直接提供路径作为参数：
```
/skill-analyze Assets/Skills/TryndamereBloodlust.json
```

如果未提供参数，将询问用户要分析哪个技能文件。
