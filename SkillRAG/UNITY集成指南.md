# Unityé›†æˆæŒ‡å— - ä»Unityå¯åŠ¨SkillRAGæœåŠ¡å™¨

## ğŸ¯ åŠŸèƒ½è¯´æ˜

é€šè¿‡Unity Editorèœå•ï¼Œå¯ä»¥ä¸€é”®å¯åŠ¨SkillRAGæœåŠ¡å™¨ï¼Œæ— éœ€æ‰‹åŠ¨è¿è¡Œbatè„šæœ¬ã€‚

- âœ… Unityèœå•ä¸€é”®å¯åŠ¨/åœæ­¢
- âœ… è‡ªåŠ¨æ£€æµ‹æœåŠ¡å™¨çŠ¶æ€
- âœ… è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨åˆ°Web UI
- âœ… è¿›ç¨‹ç®¡ç†ï¼ˆUnityå…³é—­æ—¶å¯é€‰è‡ªåŠ¨å…³é—­æœåŠ¡å™¨ï¼‰

---

## ğŸ“‹ é¦–æ¬¡è®¾ç½®ï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰

### æ­¥éª¤1ï¼šå®‰è£…Pythonä¾èµ–

**æ–¹æ³•Aï¼šé€šè¿‡Unityèœå•å®‰è£…**

1. æ‰“å¼€Unityç¼–è¾‘å™¨
2. ç‚¹å‡»èœå•ï¼š`Tools > SkillRAG > å®‰è£…ä¾èµ– (Install Dependencies)`
3. åœ¨å¼¹å‡ºçš„æ§åˆ¶å°çª—å£ä¸­ç­‰å¾…å®‰è£…å®Œæˆï¼ˆçº¦2-5åˆ†é’Ÿï¼‰
4. çœ‹åˆ°"å®‰è£…å®Œæˆï¼"åå…³é—­æ§åˆ¶å°çª—å£

**æ–¹æ³•Bï¼šæ‰‹åŠ¨è¿è¡Œè„šæœ¬**

1. åŒå‡» `SkillRAG/å®‰è£…ä¾èµ–.bat`
2. ç­‰å¾…å®‰è£…å®Œæˆ

### æ­¥éª¤2ï¼šé…ç½®API Key

**æ–¹æ³•Aï¼šé€šè¿‡Unityèœå•é…ç½®**

1. ç‚¹å‡»èœå•ï¼š`Tools > SkillRAG > é…ç½®API Key`
2. æŒ‰ç…§æç¤ºè®¾ç½®ç¯å¢ƒå˜é‡æˆ–ç¼–è¾‘config.yaml

**æ–¹æ³•Bï¼šæ‰‹åŠ¨é…ç½®ï¼ˆæ¨èï¼‰**

åœ¨Windows PowerShellä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ°¸ä¹…ï¼‰ï¼š

```powershell
[System.Environment]::SetEnvironmentVariable("DEEPSEEK_API_KEY", "your-key", "User")
[System.Environment]::SetEnvironmentVariable("DASHSCOPE_API_KEY", "your-qwen-key", "User")
```

æˆ–ç¼–è¾‘ `SkillRAG/Python/config.yaml`ï¼Œå°†API Keyç›´æ¥å†™å…¥ï¼ˆä»…æµ‹è¯•ç”¨ï¼‰ï¼š

```yaml
llm_providers:
  deepseek:
    api_key: "sk-your-actual-key-here"  # ç›´æ¥å†™API Key
```

---

## ğŸš€ æ—¥å¸¸ä½¿ç”¨

### å¯åŠ¨æœåŠ¡å™¨

1. æ‰“å¼€Unityç¼–è¾‘å™¨
2. ç‚¹å‡»èœå•ï¼š`Tools > SkillRAG > å¯åŠ¨æœåŠ¡å™¨ (Start Server)`
3. ç­‰å¾…10-30ç§’ï¼ˆé¦–æ¬¡å¯åŠ¨ç¨æ…¢ï¼‰
4. æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ http://127.0.0.1:7860

**å¯åŠ¨åä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼š**

```
SkillRAGæœåŠ¡å™¨
æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼

Web UI: http://127.0.0.1:7860
RPCç«¯å£: 8766

æµè§ˆå™¨å°†è‡ªåŠ¨æ‰“å¼€ï¼Œå¦‚æœªæ‰“å¼€è¯·æ‰‹åŠ¨è®¿é—®ã€‚
[ç¡®å®š]
```

### åœæ­¢æœåŠ¡å™¨

ç‚¹å‡»èœå•ï¼š`Tools > SkillRAG > åœæ­¢æœåŠ¡å™¨ (Stop Server)`

### æ‰“å¼€Web UI

å¦‚æœæµè§ˆå™¨æ„å¤–å…³é—­ï¼Œç‚¹å‡»ï¼š`Tools > SkillRAG > æ‰“å¼€Web UI (Open Web UI)`

### æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€

ç‚¹å‡»èœå•ï¼š`Tools > SkillRAG > æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€ (Check Status)`

ä¼šæ˜¾ç¤ºï¼š

```
SkillRAG æœåŠ¡å™¨çŠ¶æ€

Web UI (ç«¯å£ 7860): âœ“ è¿è¡Œä¸­
RPCæœåŠ¡ (ç«¯å£ 8766): âœ“ è¿è¡Œä¸­

è®¿é—®åœ°å€: http://127.0.0.1:7860
```

---

## ğŸ”§ å®Œæ•´Unityèœå•è¯´æ˜

| èœå•é¡¹ | å¿«æ·é”® | åŠŸèƒ½ |
|--------|--------|------|
| **å¯åŠ¨æœåŠ¡å™¨** | - | å¯åŠ¨PythonæœåŠ¡å™¨å’ŒWeb UI |
| **åœæ­¢æœåŠ¡å™¨** | - | åœæ­¢æœåŠ¡å™¨è¿›ç¨‹ |
| **æ‰“å¼€Web UI** | - | åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€Web UI |
| **æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€** | - | æ£€æµ‹æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€ |
| --- | - | åˆ†éš”çº¿ |
| **å®‰è£…ä¾èµ–** | - | å®‰è£…Pythonä¾èµ–åŒ…ï¼ˆä»…é¦–æ¬¡ï¼‰ |
| **é…ç½®API Key** | - | æ‰“å¼€é…ç½®æ–‡ä»¶ç›®å½• |

---

## ğŸ“ æ–‡ä»¶è¯´æ˜

### Unityä¾§æ–‡ä»¶

```
Assets/Scripts/RAGSystem/Editor/
â””â”€â”€ SkillRAGServerManager.cs    # Unity Editorèœå•è„šæœ¬
```

### Pythonä¾§æ–‡ä»¶

```
SkillRAG/
â”œâ”€â”€ å¿«é€Ÿå¯åŠ¨(Unity).bat          # Unityè°ƒç”¨çš„å¯åŠ¨è„šæœ¬
â”œâ”€â”€ å®‰è£…ä¾èµ–.bat                  # ä¾èµ–å®‰è£…è„šæœ¬
â”œâ”€â”€ å¯åŠ¨æŠ€èƒ½åŠ©æ‰‹.bat              # æ‰‹åŠ¨å¯åŠ¨è„šæœ¬ï¼ˆå®Œæ•´ç‰ˆï¼‰
â””â”€â”€ Python/
    â”œâ”€â”€ config.yaml               # é…ç½®æ–‡ä»¶
    â”œâ”€â”€ web_ui.py                 # Web UIä¸»ç¨‹åº
    â””â”€â”€ requirements_webui.txt    # ä¾èµ–æ¸…å•
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ç‚¹å‡»"å¯åŠ¨æœåŠ¡å™¨"åæ— ååº”ï¼Ÿ

**æ£€æŸ¥æ¸…å•ï¼š**

1. æ˜¯å¦å·²å®‰è£…ä¾èµ–ï¼Ÿ
   - è¿è¡Œï¼š`Tools > SkillRAG > å®‰è£…ä¾èµ–`

2. Pythonæ˜¯å¦å·²å®‰è£…ï¼Ÿ
   - å‘½ä»¤è¡Œè¿è¡Œï¼š`python --version`
   - åº”æ˜¾ç¤º Python 3.8+

3. æŸ¥çœ‹Unity Consoleæ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—

### Q2: æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼Œæ˜¾ç¤º"è¶…æ—¶"ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**

1. **API Keyæœªé…ç½®**
   - æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦è®¾ç½®
   - æˆ–ç¼–è¾‘ `config.yaml` ç›´æ¥å†™API Key

2. **ä¾èµ–åŒ…æœªå®‰è£…å®Œæ•´**
   - é‡æ–°è¿è¡Œ"å®‰è£…ä¾èµ–"

3. **ç«¯å£è¢«å ç”¨**
   - æ£€æŸ¥7860å’Œ8766ç«¯å£æ˜¯å¦è¢«å…¶ä»–ç¨‹åºå ç”¨
   - ä½¿ç”¨ï¼š`netstat -ano | findstr 7860`

### Q3: å¦‚ä½•æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼Ÿ

**æ–¹æ³•1ï¼šæ§åˆ¶å°çª—å£**

å¯åŠ¨æœåŠ¡å™¨æ—¶ä¼šå¼¹å‡ºé»‘è‰²æ§åˆ¶å°çª—å£ï¼Œæ—¥å¿—å®æ—¶æ˜¾ç¤ºåœ¨å…¶ä¸­ã€‚

**æ–¹æ³•2ï¼šæ—¥å¿—æ–‡ä»¶**

æŸ¥çœ‹ `SkillRAG/Python/logs/skillrag_server.log`

### Q4: Unityå…³é—­åæœåŠ¡å™¨æ˜¯å¦è‡ªåŠ¨å…³é—­ï¼Ÿ

**å½“å‰è®¾ç½®ï¼šä¸è‡ªåŠ¨å…³é—­**

- ä¼˜ç‚¹ï¼šUnityé‡å¯åå¯ç›´æ¥ä½¿ç”¨å·²å¯åŠ¨çš„æœåŠ¡å™¨
- ç¼ºç‚¹ï¼šéœ€è¦æ‰‹åŠ¨åœæ­¢ï¼ˆé€šè¿‡èœå•æˆ–å…³é—­æ§åˆ¶å°çª—å£ï¼‰

**å¦‚éœ€è‡ªåŠ¨å…³é—­**ï¼Œç¼–è¾‘ `SkillRAGServerManager.cs:389`ï¼Œå–æ¶ˆæ³¨é‡Šï¼š

```csharp
[InitializeOnLoadMethod]
private static void Initialize()
{
    // å–æ¶ˆæ³¨é‡Šä»¥ä¸‹ä»£ç 
    EditorApplication.quitting += () =>
    {
        if (IsServerRunning())
        {
            StopServer();
        }
    };
}
```

### Q5: å¦‚ä½•åœ¨Unityä¸­ä½¿ç”¨RPCè°ƒç”¨ï¼Ÿ

1. **æ·»åŠ RPCå®¢æˆ·ç«¯ç»„ä»¶**
   - åœºæ™¯ä¸­åˆ›å»ºGameObject
   - æ·»åŠ ç»„ä»¶ï¼š`UnityRPCClient`
   - æ·»åŠ ç»„ä»¶ï¼š`UnityRPCBridge`

2. **è¿è¡Œåœºæ™¯**
   - å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨è¿æ¥åˆ°RPCæœåŠ¡å™¨ï¼ˆç«¯å£8766ï¼‰

3. **è°ƒç”¨ç¤ºä¾‹ï¼ˆC#ï¼‰**

```csharp
var rpcClient = FindObjectOfType<UnityRPCClient>();

// è°ƒç”¨æŠ€èƒ½æœç´¢
var result = await rpcClient.CallAsync("search_skills", new {
    query = "ç«çƒæœ¯",
    top_k = 5
});

Debug.Log(result);
```

---

## ğŸ”— ä¸‹ä¸€æ­¥

- **Web UIä½¿ç”¨**ï¼šæŸ¥çœ‹ `QUICKSTART.md`
- **APIå‚è€ƒ**ï¼šæŸ¥çœ‹ `llm_providers.py` çš„æ³¨é‡Š
- **å¼€å‘æ–‡æ¡£**ï¼šæŸ¥çœ‹ `docs/mcp_requirements/`

---

**äº«å—ä»Unityæ— ç¼å¯åŠ¨AIåŠ©æ‰‹çš„ä¾¿æ·ä½“éªŒï¼** ğŸ®âœ¨
