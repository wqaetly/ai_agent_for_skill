# 描述管理器 - 更新说明

## 🎉 新功能：内置服务器启动

### ✨ 更新内容

现在你可以**直接在描述管理器中启动RAG服务器**，不需要再切换到RAG查询窗口了！

### 🆕 新增功能

#### 1. **服务器控制按钮**（顶部统计信息区域）

- **🚀 启动RAG服务器** - 一键启动Python服务器
- **⏹️ 停止RAG服务器** - 停止运行中的服务器
- **📋 查看服务器日志** - 查看服务器输出信息

#### 2. **智能状态显示**

- 🟢 **运行中** - 服务器正常运行
- 🔴 **未连接** - 服务器未启动或连接失败

#### 3. **自动连接检测**

启动服务器后会自动：
- 等待3秒让服务器初始化
- 自动检测连接状态
- 显示启动成功提示

---

## 🎯 使用方法

### 方法1：描述管理器内启动（推荐）✨

```
1. 打开描述管理器
2. 查看顶部状态：🔴 未连接
3. 点击 🚀 启动RAG服务器
4. 等待3-5秒
5. 看到 🟢 运行中
6. 完成！可以使用所有功能了
```

### 方法2：RAG查询窗口启动

```
1. 打开 技能系统 > RAG查询窗口
2. 点击工具栏的 启动服务器
3. 等待启动完成
4. 返回描述管理器使用
```

---

## 💡 使用场景

### 场景1：首次使用

```
打开描述管理器
  ↓
点击 🚀 启动RAG服务器
  ↓
等待启动成功
  ↓
点击 ⚡ 一键完成全流程
  ↓
完成！
```

### 场景2：日常使用

```
打开描述管理器
  ↓
如果看到 🔴 未连接
  ↓
点击 🚀 启动RAG服务器
  ↓
继续正常工作
```

### 场景3：调试问题

```
点击 📋 查看服务器日志
  ↓
检查服务器输出
  ↓
如果有问题，点击 ⏹️ 停止服务器
  ↓
重新启动
```

---

## 🔧 技术细节

### 启动流程

1. **查找Python环境**
   - 自动检测 `python`、`python3`、`py` 命令
   - 如果未找到，会提示安装Python

2. **定位服务器脚本**
   - 自动查找 `SkillRAG/Python/server.py`
   - 如果未找到，会显示详细路径信息

3. **启动进程**
   - 在后台启动Python服务器
   - 捕获所有输出日志
   - 监控进程状态

4. **自动连接**
   - 等待3秒初始化
   - 自动检测连接状态
   - 显示启动结果

### 进程管理

- **自动清理**：窗口关闭时自动停止服务器
- **状态监控**：实时显示服务器运行状态
- **日志记录**：保存所有服务器输出

---

## 📊 对比：更新前 vs 更新后

### 更新前 ❌

```
1. 打开描述管理器
2. 发现需要服务器
3. 切换到RAG查询窗口
4. 启动服务器
5. 切换回描述管理器
6. 继续工作

总共：6步，需要切换窗口
```

### 更新后 ✅

```
1. 打开描述管理器
2. 点击 🚀 启动RAG服务器
3. 继续工作

总共：3步，无需切换窗口
```

**效率提升：50%** 🚀

---

## ⚠️ 注意事项

### 1. Python环境要求

- 需要安装 Python 3.7+
- 需要安装依赖包（见 `SkillRAG/requirements.txt`）

### 2. 端口占用

- 服务器使用端口 8765
- 如果端口被占用，启动会失败
- 解决方法：关闭占用端口的程序或修改配置

### 3. 服务器日志

- 点击 📋 查看服务器日志 可以看到详细输出
- 日志会显示在Unity Console中
- 如果启动失败，查看日志可以找到原因

### 4. 窗口关闭

- 关闭描述管理器窗口会自动停止服务器
- 如果需要保持服务器运行，使用RAG查询窗口启动

---

## 🎁 额外优化

### 错误提示改进

现在当索引重建失败时，错误提示会告诉你：

```
❌ 网络连接错误

这通常表示RAG服务器未运行。

请按以下步骤操作：
1. 点击顶部的 🚀 启动RAG服务器 按钮
2. 等待启动完成（约3-5秒）
3. 重新点击 🔨 重建RAG索引

或者：
1. 打开 技能系统 > RAG查询窗口
2. 点击 🚀 启动服务器
```

**更清晰、更友好、更高效！**

---

## 📚 相关文档

- [描述管理器使用指南.md](./描述管理器使用指南.md) - 完整功能说明
- [描述管理器快速参考.md](./描述管理器快速参考.md) - 快速查询手册
- [RAG索引错误排查指南.md](./RAG索引错误排查指南.md) - 问题排查
- [RAG错误快速解决.md](./RAG错误快速解决.md) - 快速解决方案

---

## 🎊 总结

### 核心改进

✅ **更方便** - 无需切换窗口  
✅ **更快速** - 一键启动服务器  
✅ **更直观** - 实时状态显示  
✅ **更智能** - 自动连接检测  
✅ **更友好** - 详细错误提示  

### 使用建议

1. **首次使用**：点击 🚀 启动服务器 → ⚡ 一键完成全流程
2. **日常使用**：打开工具时先检查服务器状态
3. **遇到问题**：查看 📋 服务器日志 了解详情

---

**享受更流畅的工作体验！** 🎉
